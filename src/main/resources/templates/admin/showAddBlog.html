<!DOCTYPE html>
<html xmlns:th="http://www.springframework.org/schema/mvc">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/my.css">
    <!--<link rel="stylesheet" href="css/style.css" th:href="@{/editor.md-master/examples/css/style.css}" />-->
    <link rel="stylesheet" href="../css/editormd.css" th:href="@{/editor.md-master/css/editormd.css}" />
    <title>åå°ç®¡ç†</title>

</head>
<body>
<div id="app">
    <el-container style="height: 60px;">
        <!--LOGO-->
        <el-image style="width: 200px; height: 60px;" src="/img/logo.jpg"></el-image>
        <!--çŠ¶æ€æ -->
        <el-main style="background-color: #ffcccc">


            å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆæ¬¢è¿ğŸ‘

            <el-link style="float: right" href="https://element.eleme.io" target="_blank" :underline="false">
                <i class="el-icon-s-promotion"></i>åšå®¢é¦–é¡µ
            </el-link>

            <el-dropdown style="float: right;">
                <span class="el-dropdown-link" style="margin-right: 30px;"><i class="el-icon-s-custom"
                                                                              style="margin-right: 10px;"></i>é¼</span>
                <el-dropdown-menu slot="dropdown">
                    <el-dropdown-item disabled>æ˜µç§°ï¼š&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;é¼</el-dropdown-item>
                    <el-dropdown-item disabled>è´¦å·ï¼š&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MonsterXu</el-dropdown-item>
                    <el-dropdown-item disabled>ä¸Šæ¬¡ç™»å½•ï¼š&nbsp;&nbsp;&nbsp;2020-07-19 17:00:29</el-dropdown-item>
                </el-dropdown-menu>
            </el-dropdown>
        </el-main>
    </el-container>

    <!--ä¸­é—´-->
    <el-container style="height: 765px; border: 1px solid #eee;">
        <!--å¯¼èˆªæ -->
        <el-aside width="200px" style="background-color: rgb(238, 241, 246)">
            <el-menu
                    :default-openeds="['1','2','3']"
                    class="links">
                <!--åˆ†ç±»æ ‡é¢˜-->
                <el-submenu index="1">
                    <template slot="title"><i class="el-icon-stopwatch"></i>ä»ªè¡¨ç›˜</template>
                    <el-menu-item-group>
                        <a href="/admin">
                            <el-menu-item index="1-1"><i class="el-icon-stopwatch"></i>ä»ªè¡¨ç›˜</el-menu-item>
                        </a>
                        <a href="/admin/blog/showAddBlog">
                            <el-menu-item index="1-2"><i class="el-icon-edit-outline"></i>å‘å¸ƒåšå®¢</el-menu-item>
                        </a>
                    </el-menu-item-group>
                </el-submenu>

                <el-submenu index="2">
                    <template slot="title"><i class="el-icon-menu"></i>ç®¡ç†æ¨¡å—</template>
                    <el-menu-item-group>
                        <a href="/admin/blog">
                            <el-menu-item index="2-1"><i class="el-icon-notebook-1"></i>åšå®¢ç®¡ç†</el-menu-item>
                        </a>
                        <a href="/admin/comment">
                            <el-menu-item index="2-2"><i class="el-icon-chat-line-round"></i>è¯„è®ºç®¡ç†</el-menu-item>
                        </a>
                        <a href="/admin/category">
                            <el-menu-item index="2-3"><i class="el-icon-collection-tag"></i>åˆ†ç±»ç®¡ç†</el-menu-item>
                        </a>
                        <a href="/admin/tags">
                            <el-menu-item index="2-4"><i class="el-icon-price-tag"></i>æ ‡ç­¾ç®¡ç†</el-menu-item>
                        </a>
                        <a href="/admin/link">
                            <el-menu-item index="2-5"><i class="el-icon-link"></i>å‹æƒ…é“¾æ¥</el-menu-item>
                        </a>
                    </el-menu-item-group>
                </el-submenu>

                <el-submenu index="3">
                    <template slot="title"><i class="el-icon-s-tools"></i>ç³»ç»Ÿç®¡ç†</template>
                    <el-menu-item-group>
                        <a href="/admin/system">
                            <el-menu-item index="3-1"><i class="el-icon-setting"></i>ç³»ç»Ÿé…ç½®</el-menu-item>
                        </a>
                        <a href="/admin/user">
                            <el-menu-item index="3-2"><i class="el-icon-user"></i>ä¿®æ”¹å¯†ç </el-menu-item>
                        </a>
                        <a href="/admin/exit">
                            <el-menu-item index="3-3"><i class="el-icon-switch-button"></i>å®‰å…¨é€€å‡º</el-menu-item>
                        </a>
                    </el-menu-item-group>
                </el-submenu>
            </el-menu>
        </el-aside>

        <el-container>
            <el-header
                    style="width: 100%; background-color: #ffd6d6; height: 40px; line-height: 40px; font-size: 16px;">
                <b>æ–°å¢æ–‡ç« </b>
            </el-header>

            <!--å†…å®¹å±•ç¤º-->
            <div style="padding: 50px;">
                <el-form :inline="true" ref="blogs" :model="blogs" label-width="80px">
                    <el-form-item label="æ ‡é¢˜">
                        <el-input v-model="blogs.blogTitle" placeholder="è¯·è¾“å…¥æ–‡ç« æ ‡é¢˜"></el-input>
                    </el-form-item>

                    <el-form-item label="æ ‡ç­¾">
                       <el-input v-model="blogs.blogTags" placeholder="è¯·è¾“å…¥æ–‡ç« æ ‡ç­¾"></el-input>
                    </el-form-item>
                    <el-form-item label="æ–‡ç« åˆ†ç±»">
                        <el-select v-model="blogs.blogCategoryName" placeholder="è¯·é€‰æ‹©æ–‡ç« åˆ†ç±»">
                            <el-option label="æ—¥å¸¸éšç¬”" value="0"></el-option>
                            <el-option label="SSMæ•´åˆè¿›é˜¶ç¯‡" value="1"></el-option>
                            <el-option label="About" value="2"></el-option>
                        </el-select>
                    </el-form-item>
                    <el-form-item>
                        <el-button type="primary" @click="saveBlog(blogs)">ä¿å­˜è‰ç¨¿</el-button>
                        <el-button type="success" onclick="location='/admin/blog'">è¿”å›æ–‡ç« åˆ—è¡¨</el-button>
                    </el-form-item>


                    <div id="layout">
                        <div id="test-editormd"></div>
                    </div>


                </el-form>


            </div>
        </el-container>
    </el-container>
    <!--åº•éƒ¨-->
    <el-container>
        <el-footer style="height:25px; line-height: 25px; text-align: center; font-size: 9px;">
            Copyright Â© 2020 MonsterXU All rights reserved. <i>äº¬ICPè¯110507å· äº¬ICPå¤‡10046444å· äº¬å…¬ç½‘å®‰å¤‡11010802020134å·
            äº¬ç½‘æ–‡[2020]0276-042å·</i>
        </el-footer>
    </el-container>
</div>
</body>
<!-- import Vue and Element -->
<script src="/js/vue.js"></script>
<script src="/js/ElementUI-index.js"></script>
<script src="/js/jquery.min.js"></script>
<script src="/js/axios.js"></script>
<script src="js/jquery.min.js" th:src="@{/editor.md-master/examples/js/jquery.min.js}"></script>
<script src="../editormd.js"  th:src="@{/editor.md-master/editormd.js}"></script>

<script type="text/javascript" th:inline="javascript">
    new Vue({
        el: '#app',
        data() {
            blogs = {
                blogTitle: '',
                blogTags: '',
                blogCategoryName: ''
            };
            // console.log(blogs);

            //åˆ†é¡µç›¸å…³å±æ€§
            pagination = {
                currentPage: 1,
                pageSize: 10,
                total: 0,
            };

            return {
                blogs,
                pagination
            };
        },
        //é’©å­å‡½æ•°
        created() {
        },
        methods: {
            //æ·»åŠ æ ‡ç­¾
            saveBlog(blogs) {
                this.$confirm('æ˜¯å¦ä¿å­˜æ–‡ç« ï¼Ÿ', 'ä¿å­˜æ–‡ç« ', {
                    confirmButtonText: 'ç¡®å®š',
                    cancelButtonText: 'å–æ¶ˆ',
                    type: 'warning'
                }).then(() => {

                    blogs.blogContent = $('.editormd-markdown-textarea').val();

                    console.log(blogs);

                    //å‘é€è¯·æ±‚ï¼Œä¿®æ”¹æ–‡ç« 
                    axios.post("/admin/blog/addBlog",blogs).then((res)=>{

                        if(res.data.flag){
                            this.$message({
                                type: 'success',
                                message: 'ä¿å­˜æˆåŠŸ!'
                            });
                        }else {
                            this.$message({
                                type: 'error',
                                message: 'ä¿å­˜å¤±è´¥!'
                            });
                        }
                    }).catch(()=>{
                        this.$message({
                            type: 'error',
                            message: 'ä¿å­˜å¤±è´¥!'
                        });
                    });
                }).catch(() => {
                    this.$message({
                        type: 'info',
                        message: 'å–æ¶ˆä¿å­˜'
                    });
                });
            }
        }
    });
</script>


<script type="text/javascript">
    var blogText = '';
    var testEditor;

    $(function() {

        $.get('', function(){
            testEditor = editormd("test-editormd", {
                width: "90%",
                height: 600,
                path : '/editor.md-master/lib/',
                theme : "dark",
                previewTheme : "dark",
                editorTheme : "pastel-on-dark",
                markdown : blogText,
                codeFold : true,
                //syncScrolling : false,
                saveHTMLToTextarea : true,    // ä¿å­˜ HTML åˆ° Textarea
                searchReplace : true,
                //watch : false,                // å…³é—­å®æ—¶é¢„è§ˆ
                htmlDecode : "style,script,iframe|on*",            // å¼€å¯ HTML æ ‡ç­¾è§£æï¼Œä¸ºäº†å®‰å…¨æ€§ï¼Œé»˜è®¤ä¸å¼€å¯
                //toolbar  : false,             //å…³é—­å·¥å…·æ 
                //previewCodeHighlight : false, // å…³é—­é¢„è§ˆ HTML çš„ä»£ç å—é«˜äº®ï¼Œé»˜è®¤å¼€å¯
                emoji : true,
                taskList : true,
                tocm            : true,         // Using [TOCM]
                tex : true,                   // å¼€å¯ç§‘å­¦å…¬å¼TeXè¯­è¨€æ”¯æŒï¼Œé»˜è®¤å…³é—­
                flowChart : true,             // å¼€å¯æµç¨‹å›¾æ”¯æŒï¼Œé»˜è®¤å…³é—­
                sequenceDiagram : true,       // å¼€å¯æ—¶åº/åºåˆ—å›¾æ”¯æŒï¼Œé»˜è®¤å…³é—­,
                //dialogLockScreen : false,   // è®¾ç½®å¼¹å‡ºå±‚å¯¹è¯æ¡†ä¸é”å±ï¼Œå…¨å±€é€šç”¨ï¼Œé»˜è®¤ä¸ºtrue
                //dialogShowMask : false,     // è®¾ç½®å¼¹å‡ºå±‚å¯¹è¯æ¡†æ˜¾ç¤ºé€æ˜é®ç½©å±‚ï¼Œå…¨å±€é€šç”¨ï¼Œé»˜è®¤ä¸ºtrue
                //dialogDraggable : false,    // è®¾ç½®å¼¹å‡ºå±‚å¯¹è¯æ¡†ä¸å¯æ‹–åŠ¨ï¼Œå…¨å±€é€šç”¨ï¼Œé»˜è®¤ä¸ºtrue
                //dialogMaskOpacity : 0.4,    // è®¾ç½®é€æ˜é®ç½©å±‚çš„é€æ˜åº¦ï¼Œå…¨å±€é€šç”¨ï¼Œé»˜è®¤å€¼ä¸º0.1
                //dialogMaskBgColor : "#000", // è®¾ç½®é€æ˜é®ç½©å±‚çš„èƒŒæ™¯é¢œè‰²ï¼Œå…¨å±€é€šç”¨ï¼Œé»˜è®¤ä¸º#fff
                imageUpload : true,
                imageFormats : ["jpg", "jpeg", "gif", "png", "bmp", "webp"],
                imageUploadURL : "/editor.md-master/examples/php/upload.php",
                onload : function() {
                    console.log('onload', this);
                    //this.fullscreen();
                    //this.unwatch();
                    //this.watch().fullscreen();

                    //this.setMarkdown("#PHP");
                    //this.width("100%");
                    //this.height(480);
                    //this.resize("100%", 640);
                }
            });
        });

        $("#goto-line-btn").bind("click", function(){
            testEditor.gotoLine(90);
        });

        $("#show-btn").bind('click', function(){
            testEditor.show();
        });

        $("#hide-btn").bind('click', function(){
            testEditor.hide();
        });

        $("#get-md-btn").bind('click', function(){
            alert(testEditor.getMarkdown());
        });

        $("#get-html-btn").bind('click', function() {
            alert(testEditor.getHTML());
        });

        $("#watch-btn").bind('click', function() {
            testEditor.watch();
        });

        $("#unwatch-btn").bind('click', function() {
            testEditor.unwatch();
        });

        $("#preview-btn").bind('click', function() {
            testEditor.previewing();
        });

        $("#fullscreen-btn").bind('click', function() {
            testEditor.fullscreen();
        });

        $("#show-toolbar-btn").bind('click', function() {
            testEditor.showToolbar();
        });

        $("#close-toolbar-btn").bind('click', function() {
            testEditor.hideToolbar();
        });

        $("#toc-menu-btn").click(function(){
            testEditor.config({
                tocDropdown   : true,
                tocTitle      : "ç›®å½• Table of Contents",
            });
        });

        $("#toc-default-btn").click(function() {
            testEditor.config("tocDropdown", false);
        });
    });
</script>

</html>